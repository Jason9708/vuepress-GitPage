<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>loader 与 plugin | CHICAGO</title>
    <meta name="description" content="前端仔的自我挣扎">
    <link rel="icon" href="/vuepress-GitPage/logo/favicon.ico">
    
    <link rel="preload" href="/vuepress-GitPage/assets/css/0.styles.01a33ba5.css" as="style"><link rel="preload" href="/vuepress-GitPage/assets/js/app.37ca189d.js" as="script"><link rel="preload" href="/vuepress-GitPage/assets/js/2.155b04c3.js" as="script"><link rel="preload" href="/vuepress-GitPage/assets/js/37.6bf9045f.js" as="script"><link rel="prefetch" href="/vuepress-GitPage/assets/js/10.46b0086b.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/11.daa4a2a6.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/12.6b9c3e62.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/13.5c18fc57.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/14.e416db64.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/15.eea646e9.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/16.c3ddacbb.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/17.9c92be23.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/18.1cef88cc.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/19.0007bb60.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/20.ad873dd4.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/21.5c85b951.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/22.1832ea7c.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/23.2ed17f39.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/24.dc466810.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/25.320dfa10.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/26.41238810.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/27.a9e293a0.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/28.440fd059.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/29.d7f07814.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/3.22f6a7dc.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/30.fb22e215.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/31.ddcc866e.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/32.c8af0786.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/33.f19150ca.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/34.40efca14.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/35.1ab28b4a.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/36.003bb1fe.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/38.525fc624.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/39.b5dfca7e.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/4.310e4e99.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/40.79c4b5aa.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/41.0a309ba6.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/42.015a20c9.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/5.10910fab.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/6.9de72c04.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/7.c8439b32.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/8.9911e584.js"><link rel="prefetch" href="/vuepress-GitPage/assets/js/9.79c793b2.js">
    <link rel="stylesheet" href="/vuepress-GitPage/assets/css/0.styles.01a33ba5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-GitPage/" class="home-link router-link-active"><!----> <span class="site-name">CHICAGO</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-GitPage/interview/" class="nav-link">前端面试专栏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端小册" class="dropdown-title"><span class="title">前端小册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-GitPage/webpack/" class="nav-link router-link-active">Webpack</a></li><li class="dropdown-item"><!----> <a href="/vuepress-GitPage/designpattern/" class="nav-link">Designpattern</a></li><li class="dropdown-item"><!----> <a href="/vuepress-GitPage/handwrittenScript/" class="nav-link">常见前端面试手写题</a></li><li class="dropdown-item"><!----> <a href="/vuepress-GitPage/flutterNote/" class="nav-link">Flutter</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Jason9708" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-GitPage/interview/" class="nav-link">前端面试专栏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端小册" class="dropdown-title"><span class="title">前端小册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-GitPage/webpack/" class="nav-link router-link-active">Webpack</a></li><li class="dropdown-item"><!----> <a href="/vuepress-GitPage/designpattern/" class="nav-link">Designpattern</a></li><li class="dropdown-item"><!----> <a href="/vuepress-GitPage/handwrittenScript/" class="nav-link">常见前端面试手写题</a></li><li class="dropdown-item"><!----> <a href="/vuepress-GitPage/flutterNote/" class="nav-link">Flutter</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Jason9708" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vuepress-GitPage/webpack/" class="sidebar-link">webpack小册</a></li><li><a href="/vuepress-GitPage/webpack/webpack01/" class="sidebar-link">webpack 如何解析代码模块路径</a></li><li><a href="/vuepress-GitPage/webpack/webpack02/" class="active sidebar-link">loader 与 plugin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-GitPage/webpack/webpack02/#配置loader" class="sidebar-link">配置loader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-GitPage/webpack/webpack02/#loader匹配规则" class="sidebar-link">loader匹配规则</a></li><li class="sidebar-sub-header"><a href="/vuepress-GitPage/webpack/webpack02/#规则条件匹配" class="sidebar-link">规则条件匹配</a></li><li class="sidebar-sub-header"><a href="/vuepress-GitPage/webpack/webpack02/#module-type" class="sidebar-link">module type</a></li><li class="sidebar-sub-header"><a href="/vuepress-GitPage/webpack/webpack02/#使用loader配置" class="sidebar-link">使用loader配置</a></li><li class="sidebar-sub-header"><a href="/vuepress-GitPage/webpack/webpack02/#loader执行顺序" class="sidebar-link">loader执行顺序</a></li><li class="sidebar-sub-header"><a href="/vuepress-GitPage/webpack/webpack02/#使用-noparse" class="sidebar-link">使用 noParse</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepress-GitPage/webpack/webpack02/#配置plugin" class="sidebar-link">配置plugin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-GitPage/webpack/webpack02/#几个常用插件" class="sidebar-link">几个常用插件</a></li></ul></li></ul></li><li><a href="/vuepress-GitPage/webpack/webpack03/" class="sidebar-link">配置webpack-dev-server</a></li><li><a href="/vuepress-GitPage/webpack/webpack04/" class="sidebar-link">区分开发与生产环境</a></li><li><a href="/vuepress-GitPage/webpack/webpack05/" class="sidebar-link">用HMR提高开发效率</a></li><li><a href="/vuepress-GitPage/webpack/webpack06/" class="sidebar-link">通过webpack优化前端环境</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="loader-与-plugin"><a href="#loader-与-plugin" class="header-anchor">#</a> loader 与 plugin</h1> <h2 id="配置loader"><a href="#配置loader" class="header-anchor">#</a> 配置loader</h2> <h3 id="loader匹配规则"><a href="#loader匹配规则" class="header-anchor">#</a> loader匹配规则</h3> <p>我们在使用<code>loader</code>的时候，都是在<code>modules.rules</code>中添加新的配置项，在该字段中，每一项被视为一条匹配使用loader的规则</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>最常用的例子

module.exports = {
    // ...
    module: {
        rules: [
            {
                test: /\.jsx?/,    // 正则匹配条件
                include: [
                    path.resolve(__dirname,'src')
                ],  // 规定规则范围
                use: 'babel-loader' // 规则应用结果
            }
            // ...
        ]
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>在<code>rules</code>的匹配规则中有两个关键因素：一个是匹配条件，一个是匹配规则后的应用</p> <p>匹配条件通常都是使用请求资源文件的<strong>绝对路径</strong>来进行匹配</p> <p>官方文档里将匹配条件定义为<code>resource</code>，此外还有比较少用到的<code>issuer</code>，则是声明依赖请求的源文件的绝对路径</p> <p>例如：在<code>/xx/xxx/xxxx.js</code>中声明引入<code>import './src/utils.js</code>，<code>resource</code>是<code>/xx/xxx/src/utils.js</code>，<code>issuer</code>是<code>/xx/xxx/xxxx.js</code>，规则条件会对这两个值进行尝试匹配</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
    // ...
    rules: [
        {
            resource: {
                test: /\.jsx?/,
                include: [
                    path.resolve(__dirname,'src'),
                ],
            },
            // 如果是使用issuer来匹配，则是issuer: { test: ... }
            use: 'babel-loader'
        }
        // ...
    ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="规则条件匹配"><a href="#规则条件匹配" class="header-anchor">#</a> 规则条件匹配</h3> <p><code>webpack</code>的规则提供了多种配置形式：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>- test: ...     正则匹配特定条件
- include: ...       匹配特定路径
- exclude: ...       排除特定路径
- and: [...]        必须匹配数组中所有条件
- or: [...]     匹配数组中任意一个条件
- not: [...]        排除匹配数组中所有条件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>上述这些条件的值可以是以下5种
- 字符串    必须以提供的字符串开始，所以是字符串的话，这里我们需要提供绝对路径
- 正则表达式        用正则表达式的方式判断条件
- 函数 (path) =&gt; string     返回true代表匹配成功
- 数组      至少包含一个条件的数组
- 对象      匹配所有属性值的条件    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="module-type"><a href="#module-type" class="header-anchor">#</a> module type</h3> <p><strong>什么是<code>module type</code>❓</strong> <code>module type</code>即模块类型的概念，不同模块类型类似于配置了不同的<code>loader</code>，<code>webpack</code>会有针对性地进行处理</p> <p><strong>5种模块类型</strong></p> <ul><li><code>javascript/auto</code>：即 webpack 3 默认的类型，支持现有的各种 JS 代码模块类型 —— CommonJS、AMD、ESM</li> <li><code>javascript/esm</code>：ECMAScript modules，其他模块系统，例如 CommonJS 或者 AMD 等不支持，是 .mjs 文件的默认类型</li> <li><code>javascript/dynamic</code>：CommonJS 和 AMD，排除 ESM</li> <li><code>javascript/json</code>：JSON 格式数据，require 或者 import 都可以引入，是 .json 文件的默认类型</li> <li><code>webassembly/experimental</code>：WebAssembly modules，当前还处于试验阶段，是 .wasm 文件的默认类型</li></ul> <p>如果不希望使用默认的类型的话，在确定好匹配规则条件时，我们可以使用 <code>type</code> 字段来指定模块类型，例如把所有的 <code>JS</code> 代码文件都设置为强制使用 <code>ESM</code> 类型：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
    test: /\.js/,
    include: [
        path.resolve(__dirname,'src')
    ],
    type: 'javascript/esm', // 指定模块类型 （ 默认是 javascript/auto ）
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="使用loader配置"><a href="#使用loader配置" class="header-anchor">#</a> 使用loader配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>rules: [
    {
        test: /\.less/,
        use: [
            'style-loader', // 直接用字符串表示loader
            {
                loader:'css-loader',
                options:{
                    importLoaders: 1
                }
            }, // 用对象表示 loader，可以传递loader配置等
            {
                loader: 'less-loader',
                options: {
                    noIeCompoat: true
                }, // 传递loader配置
            }
        ]
    }
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>上面这个例子种，<code>use</code>可以是一个数组，也可以是一个字符串或者表示<code>loader</code>的对象。</p> <p><strong>PS：</strong> 我们还可以使用<code>options</code>给对应的<code>loader</code>传递一些配置项</p> <h3 id="loader执行顺序"><a href="#loader执行顺序" class="header-anchor">#</a> loader执行顺序</h3> <p>在一个匹配规则中可以配置使用多个<code>loader</code>，即一个模块文件可以经过多个<code>loader</code>的转换处理，执行的顺序是从最后配置的<code>loader</code>开始，由后配置到先配置的顺序，例如上个例子中，<code>.less</code>文件会经理<code>less-loader</code>到<code>css-loader</code>再到<code>style-loader</code>的处理，最后成一个可以打包的模块</p> <p>从后配置到先配置的顺序是在同一个<code>rule</code>中的执行方案，那么又有另外一个问题！当一个模块文件同时匹配到多个<code>rule</code>，<code>loader</code>又会按照什么顺序去应用呢？</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rules: [
  {
    test: /\.js$/,
    exclude: /node_modules/,  // 排除node_modules
    loader: &quot;eslint-loader&quot;,
  },
  {
    test: /\.js$/,
    exclude: /node_modules/, // 排除node_modules
    loader: &quot;babel-loader&quot;,
  },
],
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>上面的例子中我们需要在<code>babel-loader</code>应用之前先应用<code>eslint-loader</code>,我们无法保证按照这种顺序执行</p> <p><code>webpack</code>在<code>rules</code>中提供了一个<code>enforce</code>字段，用来配置当前<code>rule</code>的<code>loader</code>类型，默认是普通类型，而我们可以配置成<code>pre</code>或者是<code>post</code></p> <ul><li>pre - 前置</li> <li>post - 后置</li></ul> <p>所有的<code>loader</code>会按照<strong>前置 → 行内 → 普通 → 后置</strong>的顺序执行，所以我们要确保<code>eslint-loader</code>在<code>babel-loader</code>之前使用，就需要添加<code>enforce</code>字段</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rules:[
    {
        enforce: &quot;pre&quot;, // 前置
        test: /\.js$/,
        exclude: /node_modules/,
        loader: &quot;eslint-loader&quot;
    }
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="使用-noparse"><a href="#使用-noparse" class="header-anchor">#</a> 使用 noParse</h3> <p><code>module.noParse</code>可以用于配置哪些模块文件的内容不需要进行解析。</p> <p>对于一些不需要解析依赖的库（例如<code>jquery</code>），可以通过<code>noParse</code>来配置（可提高整体构建速度）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
    // ...
    module: {
        noParse: /jquery|lodash/, // 正则表达式

        &lt;!-- 或者使用 function
        noParse(content) {
            return /jquery|lodash/.test(content)
        }, --&gt;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>❗ 使用<code>noParse</code>进行忽略的模块文件中不能使用<code>import / require / define</code>等引用方式</strong></p> <hr> <h2 id="配置plugin"><a href="#配置plugin" class="header-anchor">#</a> 配置plugin</h2> <p><code>plugin</code>为<code>webpack</code>提供额外的功能，由于需要提供不同的功能，不同的插件本身的配置比较多样化</p> <p><code>webpack</code>插件可以上 https://github.com/webpack-contrib/awesome-webpack#webpack-plugins 进行查阅</p> <h3 id="几个常用插件"><a href="#几个常用插件" class="header-anchor">#</a> 几个常用插件</h3> <h4 id="defineplugin"><a href="#defineplugin" class="header-anchor">#</a> DefinePlugin</h4> <p><code>DefinePlugin</code>是<code>webpack</code>的内置插件，不需要安装，直接通过<code>webpack.DefinePlugin</code>使用</p> <p>作用：创建一些在编译时可以配置的<strong>全局常量</strong>，这些常量的值我们可以在<code>webpack</code>的配置中指定</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
    // ...
    plugins: [
        new webpack.DefinePlugin({
            _GET:JSON.stringify('get'),   // const _GET = 'get'
            _POST:JSON.stringify('post'), // const _POST = 'post'
            _DELETE:JSON.stringify('delete'), // const _DELETE = 'delete'
            _PUT:JSON.stringify('put'), // const _PUT = 'put'
        })
    ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>这些配置好的全局常量，可以在代码中直接使用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>console.log('this Api type is' + _GET)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>配置规则</strong></p> <ul><li>如果配置的值是字符串，那么字符串会被当成代码片段来执行，其结果作为最终变量的值，例如<code>'1 + 1'</code>，最后结果会是<code>2</code></li> <li>如果配置的值不是字符串，也不是对象字面量，那么值会转换为一个字符串，例如<code>true</code>，会被转换成<code>'true'</code></li> <li>如果配置的是一个对象字面量，那么该对象的所有<code>key</code>会以相同的方式定义</li></ul> <h4 id="extract-text-webpack-plugin"><a href="#extract-text-webpack-plugin" class="header-anchor">#</a> extract-text-webpack-plugin</h4> <p>作用：用来把依赖的<code>css</code>分离出来成为单独的文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const ExtractTextPlugin = require('extract-text-webpack-plugin')

module.exports = {
    // ...
    module: {
        rules: [
            {
                test: /\.css$/,
                use: ExtractTextPlugin.extract({
                    fallback: 'style-loaer',
                    use: 'css-loader'
                })
            }
        ]
    },
    plugins: [
        new ExtractTextPlugin('index.css')  // 配置文件名
    ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>有时候我们构建的入口不止一个，那么ExtractTextPlugin会为每一个入口创建单独分离的文件

plugins: [
    new ExtractTextPlugin('[name].css')
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>❗ 使用ExtractTextPlugin，还需要调整<code>loader</code>对应的配置</strong></p> <h4 id="provideplugin"><a href="#provideplugin" class="header-anchor">#</a> ProvidePlugin</h4> <p><code>ProvidePlugin</code>是<code>webpack</code>内置的，直接通过<code>webpack.ProvidePlugin</code>来使用</p> <p>作用： 引用某些模块作为程序运行时的变量，不必每次使用都需要<code>import/require</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>plugins: [
    new webpack.ProvidePlugin({
        identifier:'xxx',  // 类似于 import 'xxx'  
        // identifier: ['xxx','xxxx']   类似于 import xxxx from 'xxxx'
    })
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="ignoreplugin"><a href="#ignoreplugin" class="header-anchor">#</a> IgnorePlugin</h4> <p><code>IgnorePlugin</code>是<code>webpack</code>内置的，直接通过<code>webpack.IgnorePlugin</code>来使用</p> <p>作用：用于忽略某些特定的模块，让webpack不把这些指定的模块打包进去，例如我们使用了<code>moment.js</code>，如果直接引用后，里面会有大量的<code>i18n</code>代码，会导致打包出来的文件比较大，而实际上我们并不需要，这就是<code>IgnorePlugin</code>的使用场景</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>plugins: [
    new webpack.IgnorePlugin(/^\.\/locale$/,/moment$/)
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>IgnorePlugin</code>的参数
1 - 匹配引入模块路径的正则表达式
2 - 匹配模块的对应上下文，即所在目录名</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/6/2019, 2:50:39 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-GitPage/webpack/webpack01/" class="prev">webpack 如何解析代码模块路径</a></span> <span class="next"><a href="/vuepress-GitPage/webpack/webpack03/">配置webpack-dev-server</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuepress-GitPage/assets/js/app.37ca189d.js" defer></script><script src="/vuepress-GitPage/assets/js/2.155b04c3.js" defer></script><script src="/vuepress-GitPage/assets/js/37.6bf9045f.js" defer></script>
  </body>
</html>
